<!DOCTYPE html>
<html lang="pt-br">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Anota√ß√µes: Spring Boot | Caf√© &amp; Tapioca</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/sobre/">Sobre</a></li>
      
      <li><a href="/categories/">Categorias</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/index.xml">RSS</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Anota√ß√µes: Spring Boot</span></h1>

<h2 class="date">03/28/2025</h2>
</div>

<main>
<h1 id="pref√°cio">Pref√°cio</h1>
<p>Antes de tudo: estudar <em>Spring Boot</em> parece uma bagun√ßa sem fim, e voc√™ n√£o est√° errado. Estudar <em>Spring Boot</em> √© uma bagun√ßa!</p>
<p>Por√©m, mesmo com minhas dificuldades eu dei meu jeito. Trago aqui todas as minhas anota√ß√µes relacionadas ao framework que me ajudaram na compreens√£o dos conceitos menos intuitivos que o framework necessita que o programador saiba para construir uma API de qualidade.</p>
<p>N√£o achei a documenta√ß√£o do framework t√£o boa para aprender como dizem, ent√£o tive que fu√ßar internet √° fora para achar conte√∫dos que me ajudassem de fato a compreender os conceitos que fundamentam a estrutura de uma aplica√ß√£o de <em>API RESTful</em> em <em>Spring Boot + Spring Security</em>.</p>
<p>Pode soar meio confuso de come√ßo entender a estrutura correta para se seguir dentro do framework ao construir aplica√ß√µes web com <em>API&rsquo;s RESTful</em> - e realmente, √© um pouco confuso.</p>
<h1 id="porqu√™">Porqu√™</h1>
<p>Estou desenvolvendo um projeto mobile, e nele preciso montar um backend robusto com <strong>muitas</strong> regras de neg√≥cio, o <em>Java</em> com <em>Spring</em> √© a alternativa mais simples para implementa√ß√£o das ideias.</p>
<p>O projeto consiste em um &ldquo;gerenciador&rdquo; de im√≥veis, onde donos de im√≥veis &amp; pessoas que alugam im√≥veis s√£o capazes de registrar essas propriedades; o aplicativo deve ser capaz de devolver todos os impostos a serem pagos pelo usu√°rio de acordo com as cl√°usulas de contrato, juntamente com os reajustes anuais.</p>
<h1 id="conceitos-iniciais">Conceitos iniciais</h1>
<p>Nesse projeto achei mais pertinente programar tudo usando a arquitetura de <strong>Web Services</strong>, que pode ser explicada da seguinte forma:</p>
<img src="https://i.imgur.com/Srsn4jK.png" alt="Arq. Web Services" style="width: 100%; height: auto;">
<h2 id="princ√≠pios">Princ√≠pios</h2>
<p>O uso dessa arquitetura tem o intuito de encapsular melhor as responsabilidades de cada componente do projeto.</p>
<p>Nessa arquitetura temos um alta coes√£o e baixo acoplamento; utilizamos bastante de arquitetura em camadas, inje√ß√£o de depend√™ncias e princ√≠pios do <strong>SOLID</strong> - onde s√£o definidos princ√≠pios de design para cria√ß√£o de c√≥digos mais manunten√≠veis, flex√≠veis e escal√°veis.</p>
<ul>
<li><strong>Controller</strong>: serve como um proxy que comunica o cliente com a aplica√ß√£o. Ele intercepta a comunica√ß√£o e identifica se o request √© ou n√£o v√°lido antes de passar para as outras camadas da aplica√ß√£o. Nessa aplica√ß√£o estamos usando um intermedi√°rio para comunica√ß√£o de dados, chamado de <strong>DTO</strong> - <em>Data Transfer Object</em>.</li>
<li><strong>Service</strong>: opera como armazenador das regras de neg√≥cio da aplica√ß√£o, aqui operamos e tratamos os dados que o cliente enviou na requisi√ß√£o <em>HTTP</em>.</li>
<li><strong>Repository</strong>: √© respons√°vel por comunicar o service com o banco de dados da aplica√ß√£o, por estar usando o <strong>Spring Data JPA</strong> todas as opera√ß√µes <em>SQL</em> s√£o feitas por debaixo dos panos.</li>
</ul>
<p>A vis√£o de arquitetura √© importante para definir o caminho √° ser trilhado pelo programador, n√£o ter essas vis√µes pode deixar toda a compreens√£o do framework muito confusa.</p>
<p><strong>Posteriormente vou colocar exemplos de c√≥digo de cada classe para exemplifica√ß√£o de como um projeto Spring Boot √© montado.</strong></p>
<h1 id="organiza√ß√£o">Organiza√ß√£o</h1>
<pre><code>üì¶ com.example.demo
‚îú‚îÄ¬†DemoApplication
‚îú‚îÄ¬†model/
‚îÇ¬†¬†‚îî‚îÄ¬†UserModel
‚îú‚îÄ¬†controller/
‚îÇ¬†¬†‚îî‚îÄ¬†AuthenticationController
‚îú‚îÄ¬†service/
‚îÇ¬†¬†‚îî‚îÄ¬†UserService
‚îú‚îÄ¬†repository/
‚îÇ¬†¬†‚îî‚îÄ¬†UserRepository
‚îî‚îÄ¬†config/
¬†¬†¬†‚îî‚îÄ¬†SecurityConfig
</code></pre>
<p>¬©generated by <a href="https://woochanleee.github.io/project-tree-generator">Project Tree Generator</a></p>
<h2 id="model">Model</h2>
<p>No <em>package</em> model colocamos todas as classes de entidades do projeto.</p>
<p>O <em>Spring Boot</em> utiliza de <em>&ldquo;annotations&rdquo;</em> para avisar ao framework as responsabilidades das classes que o programador cria.
No exemplo abaixo utilizei as anota√ß√µes de <em>@Entity</em> e <em>@Table</em> na classe em si para avisar que ela √© uma entidade, e uma tabela no banco de dados.</p>
<pre><code class="language-java">@Entity
@Table(name = &quot;tb_users&quot;)
public class UserModel {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private UUID id;

    @Column(nullable = false, unique = true)
    private String username;

    @Column(nullable = false, unique = true)
    private String email;

    @Column(nullable = false)
    private String password;
}
</code></pre>
<h2 id="repository">Repository</h2>
<p>O <em>repository</em> serve como um comunicador, que leva e tr√°s informa√ß√µes de um ponto A at√© um ponto B - <strong>pense que ele age como um carteiro</strong>.</p>
<p>Na aplica√ß√£o em desenvolvimento estou usando o <em>Spring Data JPA</em>, ent√£o n√£o preciso escrever <em>SQL</em> nas transa√ß√µes, s√≥ sendo necess√°rio instanciar a interface e os m√©todos customizados, caso o programa necessite.</p>
<pre><code class="language-java">public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    Optional&lt;User&gt; findByEmail(String email);
}
</code></pre>
<h2 id="service">Service</h2>
<p>Os <em>services</em> atuam como um intermedi√°rio dentro do <em>controller</em> e do <em>repository</em>, dentro dele colocamos toda a burocracia da aplica√ß√£o, ou seja, as regras de neg√≥cio.</p>
<pre><code class="language-java">public class UserService {
    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;

    public UserService(UserRepository userRepository, PasswordEncoder passwordEncoder) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
    }

    public Optional&lt;User&gt; getUserByEmail(String email) {
        return userRepository.findByEmail(email);
    }

    public User createUser(RegisterDto registerDto) {
        var user = new User();

        user.setUsername(registerDto.username());
        user.setEmail(registerDto.email());
        user.setPassword(passwordEncoder.encode(registerDto.password()));

        return userRepository.save(user);
    }
}
</code></pre>
<h2 id="controller">Controller</h2>
<p>Dentro da <em>controller</em> colocamos todas as opera√ß√µes que v√£o ocorrer por interm√©dio de usu√°rio e servi√ßo, servindo como um <em>proxy</em> nessas intera√ß√µes.</p>
<pre><code class="language-java">@RestController
@RequestMapping(&quot;/auth&quot;) // anota√ß√£o para mapeamento de rota
public class AuthenticationController {
    private final AuthenticationService authenticationService;
    private final UserService userService;

    //inje√ß√£o de depend√™ncias
    public AuthenticationController(AuthenticationService authenticationService, UserService userService) {
        this.authenticationService = authenticationService;
        this.userService = userService;
    }

    @PostMapping(&quot;/register&quot;)
    public ResponseEntity&lt;String&gt; register(@RequestBody RegisterDto user) {
        try {
            if(userService.getUserByEmail(user.email()).isPresent()) {
                return ResponseEntity.status(HttpStatus.CONFLICT).body(&quot;Email j√° cadastrado!&quot;);
            }
            userService.createUser(user);
            return ResponseEntity.status(HttpStatus.CREATED).body(&quot;Usu√°rio cadastrado com sucesso!&quot;);
        } catch (Exception e) {
            e.printStackTrace();
            return ResponseEntity.badRequest().body(&quot;Erro ao cadastrar usu√°rio.&quot;);
        }

    }

    @PostMapping(&quot;/login&quot;)
    public ResponseEntity&lt;String&gt; login(@RequestBody LoginDto user) {
        return null;
    }
}
</code></pre>
<h1 id="conclus√£o">Conclus√£o</h1>
<p>Tendo tudo o que foi falado como base j√° conseguimos desenvolver uma aplica√ß√£o em <em>Java Spring Boot</em>; por√©m ainda temos de pensar na quest√£o da seguran√ßa da aplica√ß√£o. Futuramente vou escrever outro artigo falando sobre seguran√ßa em aplica√ß√µes <em>Spring Boot</em> usando <em>Spring Security</em> de forma mais pr√°tica.</p>
<p>Voc√™ obviamente deve saber os conceitos te√≥ricos envolvendo todo o c√≥digo, assim como foi embasado nas explica√ß√µes acima, isso acaba que por gerar uma compreens√£o enorme do c√≥digo que est√° sendo escrito. Pelo fato do Java ser uma linguagem <strong>muito</strong> verbosa, pode ser dif√≠cil decorar o c√≥digo e aprender apenas atrav√©s de exemplos, portanto o melhor dos dois mundos √© ter embasamento te√≥rico e pr√°tico.</p>

</main>

  <footer>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/math-code.min.js" defer></script>
<script src="//cdn.jsdelivr.net/npm/katex/dist/katex.min.js" defer></script>
<script src="//cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js" defer></script>
<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/render-katex.js" defer></script>

<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/center-img.min.js" defer></script>

  
  <hr/>
  ¬© Luiz G. 2024 &ndash; 2025 | <a href="https://github.com/1917dc">Github</a> | <a href="https://last.fm/user/gfxnx">Lastfm</a> | <a href="https://letterboxd.com/yyounevershould/">Letterboxd</a> | <a href="https://www.instagram.com/1917.dc">Instagram</a>
  
  </footer>
  </body>
</html>

